# chapter 04  

## LSP 리스코프 치환 원칙  
- 하위형식(subtype)이라는 용어는 클래스 상속이나 인터페이스 구현을 의미한다.  
- LSP는 네 개의 부분으로 쪼갤 수 있다.
  1. 하위형식에서 선행조건을 더할 수 없음 : 부모가 지정한 것보다 더 많은 선행조건을 요구할 수 없음을 의미한다. 예를 들어 부모가 문서의 크기를 제한하지 않았다면, 자식에서 문서의 크기가 100KB보다 작아야 한다고 요구할 수 없다.  
  2. 하위형식에서 후행조건을 약화시킬 수 없음 : 후행조건은 어떤 코드를 실행한 다음에 만족해야 하는 규칙이다. 예를 들어 유효한 파일에 importFile()을 실행했다면 contents()가 반환하는 문서 목록에 그 파일이 반드시 포함되어야 한다.  
  3. 슈퍼형식의 불변자는 하위형식에서 보존됨 : 부모에서 유지되는 모든 불변자는 자식 클래스에서도 유지되어야 한다.  
  4. 히스토리 규칙 : 자식은 부모가 허용하지 않은 상태 변화를 허용하지 않아야 한다.  
    
## 영역, 캡슐화 선택하기  
- Importer 인터페이스와 Query 클래스는 패키지 영역이다.  
- interface Importer, class Query
- 실제 소프트웨어를 개발할 때는 패키지 영역보다 공개(public) 영역을 더 많이 사용한다.  

## 코드 재사용  
- 코드를 재사용하려면 그 코드를 어떤 클래스에 구현해야 하는데, 다음의 세 가지 방법이 있다.  
  1. 유틸리티 클래스 사용 : OOP의 지향점과는 거리가 멀다.  
  2. 상속 사용 : 슈퍼클래스에 모든 공통 기능을 구현하고 서브클래스에서 공통 기능을 재사용한다. 실제 관계를 제대로 반영하지 않은 상속은 쉽게 깨질 수 있다는 점이 문제다. 일반적으로 상속으로 코드를 재사용하는 것은 좋은 방법이 아니다.   
  3. 도메인 클래스 사용 : 기본 개념을 모델링한 다음, 기본 개념이 제공하는 메소드를 호출해 다양한 클래스를 만든다. 도메인 클래스를 이용하면 상속 같이 쉽게 깨질 수 있는 계층을 만들지 않으면서도 코드를 재사용할 수 있다.  
    
## 테스트 위생  
- 테스트 대상 코드베이스뿐 아니라 테스트 코드도 깔끔하게 유지하며 유지보수하고 개선해야 함  

## 테스트 이름
- 도메인 용어를 테스트 이름에 사용한다.  
- 모든 테스트 이름은 일반 문장처럼 쉽게 읽을 수 있어야 한다.  
- 이름이 짧다고 다 좋은 것은 아니다.  

## 중복 배제
- 많은 개발자가 응용프로그램 코드에는 중복 코드를 사용하지 않으려 애쓰지만, 테스트 코드의 중복 코드는 크게 신경 쓰지 않는다.  
- 필요한 공통 로직을 (예제) assertAttributeEquals() 메소드로 추출할 수 있다.
